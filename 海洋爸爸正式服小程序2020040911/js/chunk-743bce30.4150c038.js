(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-743bce30"],{"0f86":function(t,e,a){},b789:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return o})),a.d(e,"c",(function(){return c})),a.d(e,"e",(function(){return s}));var n=a("66df"),i=function(){var t={};return n["a"].request({url:"/column/listAll",params:t,method:"get"})},l=function(t,e){return n["a"].request({url:"/column/update/".concat(t),data:e,method:"post",headers:{"content-type":"application/json"}})},o=function(t){var e={};return n["a"].request({url:"/column/product/list/".concat(t),params:e,method:"get"})},c=function(t){return n["a"].request({url:"/column/product/create",data:t,method:"post",headers:{"content-type":"application/json"}})},s=function(t,e){return n["a"].request({url:"/column/product/update/".concat(t),data:e,method:"post",headers:{"content-type":"application/json"}})}},bde1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative"}},[a("Tabs",{staticClass:"tab-flex",model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},t._l(t.titleList,(function(e,n){return a("TabPane",{key:n,attrs:{label:e.name,name:n+""}},[a("tabBar",{attrs:{show:!0,add:t.handleAdd}}),a("TablePage",{attrs:{columns:t.tableList.columns,data:t.tableList.data1,total:t.tableList.total,limit:t.search.limit,handleSearch:t.handleSearch},model:{value:t.search.page,callback:function(e){t.$set(t.search,"page",e)},expression:"search.page"}})],1)})),1),a("Button",{staticClass:"btn-position",attrs:{type:"primary"},on:{click:t.handleMoadl}},[t._v("更改栏目名称")]),a("Modal",{attrs:{title:"修改栏目名称",loading:t.loading},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("div",[a("span",[t._v("请输入栏目名称:")]),a("Input",{staticStyle:{width:"300px"},attrs:{maxlength:4},model:{value:t.titleModal.name,callback:function(e){t.$set(t.titleModal,"name",e)},expression:"titleModal.name"}})],1),a("div",{staticClass:"mg-tp"},[a("span",[t._v("一级分类：")]),a("Select",{staticStyle:{width:"150px"},model:{value:t.titleModal.firstCategoryId,callback:function(e){t.$set(t.titleModal,"firstCategoryId",e)},expression:"titleModal.firstCategoryId"}},t._l(t.levelOne,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1),a("span",{staticClass:"mg-lf"},[t._v("二级分类：")]),a("Select",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:t.titleModal.secondCategoryId,callback:function(e){t.$set(t.titleModal,"secondCategoryId",e)},expression:"titleModal.secondCategoryId"}},t._l(t.levelTwo,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)])],1)},i=[],l=(a("ac6a"),a("7f7f"),a("386d"),a("b789")),o=a("90de"),c=a("7e1e"),s={data:function(){var t=this;return{index:"0",modal1:!1,search:{page:1,limit:10},title:"",loading:!0,titleList:[],titleModal:{name:"",firstCategoryId:0,secondCategoryId:0},levelOne:[],levelTwo:[],tableList:{columns:[{title:"No.",key:"id",align:"center"},{title:"展示商品",key:"productSn",align:"center"},{title:"展示顺序",key:"sort",align:"center"},{title:"缩略图",key:"pic",align:"center",render:function(t,e){return t("img",{attrs:{src:e.row.pic},style:{width:"100px",height:"80px",padding:"10px 0"}})}},{title:"创建人",key:"creater",align:"center"},{title:"创建时间",key:"createTime",align:"center"},{title:"展示状态",key:"showStatus",align:"center",render:function(e,a){return e("i-switch",{props:{value:a.row.showStatus,size:"large",trueValue:1,falseValue:0},on:{"on-change":function(e){var n={columnCategoryId:a.row.columnCategoryId,creater:localStorage.userId,showStatus:e};Object(l["e"])(a.row.id,n).then((function(e){t.$Message.success("修改成功")})).catch((function(t){}))}},scopedSlots:{open:function(){return e("span","显示")},close:function(){return e("span","关闭")}}})}},{title:"操作",key:"packName",align:"center",render:function(e,a){return e("div",{style:{display:"flex",justifyContent:"center"}},[e("i-button",{style:{marginLeft:"15px"},on:{click:function(){var e=JSON.stringify(a.row);t.$router.push({name:"/sectionAdd",query:{obj:e}})}}},"编辑"),e("i-button",{style:{marginLeft:"15px"},props:{type:"error"},on:{click:function(){var e={columnCategoryId:a.row.columnCategoryId,creater:localStorage.userId,deleteStatus:0};Object(l["e"])(a.row.id,e).then((function(e){t.$Message.success("删除成功"),t.handleSearch()})).catch((function(t){}))}}},"删除")])}}],data1:[],total:0}}},methods:{handleSearch:function(t){var e=this;"page"!==t&&(this.search.page=1),Object(l["d"])(this.titleList[this.index].id).then((function(t){e.tableList.data1=t.data.data,console.log(e.tableList.data1)})).catch((function(t){}))},handleMoadl:function(){this.modal1=!0,this.title=this.titleList[this.index]},ok:function(){var t=this;this.titleModal.name?this.titleModal.firstCategoryId?Object(l["b"])(this.titleList[this.index].id,this.titleModal).then((function(e){t.$Message.success("修改成功"),t.modal1=!1,t.ListAll()})).catch((function(e){t.loading=!1,t.$nextTick((function(){t.loading=!0}))})):(this.loading=!1,this.$nextTick((function(){t.loading=!0})),this.$Message.warning("一级分类不允许为空")):(this.loading=!1,this.$nextTick((function(){t.loading=!0})),this.$Message.warning("栏目名称不允许为空"))},cancel:function(){this.title=this.titleList[this.index]},handleAdd:function(){this.$router.push({name:"/sectionAdd",query:{id:this.titleList[this.index].id}})},getList:function(t){var e=this;Object(c["h"])({parentId:t,pageNum:1,pageSize:1e3}).then((function(a){var n=[];a.data.data.forEach((function(t){n.push({value:t.categoryId,label:t.categoryName})})),0===t?e.levelOne=n:e.levelTwo=n})).catch((function(t){}))},ListAll:function(t){var e=this;Object(l["a"])().then((function(a){e.titleList=a.data.data,t&&(e.titleModal=Object(o["h"])(e.titleList[0],e.titleModal),e.handleSearch())})).catch((function(t){}))}},computed:{getLeval:function(){return this.titleModal.firstCategoryId}},watch:{getLeval:{handler:function(t){this.getList(t)}},index:function(t){this.titleModal=Object(o["h"])(this.titleList[t],this.titleModal),this.handleSearch()}},created:function(){this.ListAll(!0),this.getList(0)}},r=s,d=(a("c38b"),a("2877")),u=Object(d["a"])(r,n,i,!1,null,null,null);e["default"]=u.exports},c38b:function(t,e,a){"use strict";var n=a("0f86"),i=a.n(n);i.a}}]);