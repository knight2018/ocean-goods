(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42900442"],{"1e03":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"add-box"},[r("Form",{ref:"formAttribute",attrs:{model:t.formAttribute,rules:t.ruleInline,"label-colon":"","label-width":150}},[r("FormItem",{attrs:{prop:"attributeName",label:"属性名称"}},[r("Input",{staticStyle:{width:"300px"},model:{value:t.formAttribute.attributeName,callback:function(e){t.$set(t.formAttribute,"attributeName",e)},expression:"formAttribute.attributeName"}})],1),r("FormItem",{attrs:{prop:"attributeCategoryId",label:"商品类型"}},[r("Select",{staticStyle:{width:"200px"},attrs:{filterable:""},model:{value:t.formAttribute.attributeCategoryId,callback:function(e){t.$set(t.formAttribute,"attributeCategoryId",e)},expression:"formAttribute.attributeCategoryId"}},t._l(t.shopList,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),r("FormItem",{attrs:{prop:"selectType",label:"属性是否可选"}},[r("RadioGroup",{model:{value:t.formAttribute.selectType,callback:function(e){t.$set(t.formAttribute,"selectType",e)},expression:"formAttribute.selectType"}},[r("Radio",{attrs:{label:1}},[t._v("单选")]),r("Radio",{attrs:{label:2}},[t._v("多选")])],1)],1),r("FormItem",{attrs:{prop:"inputType",label:"属性值录入方式"}},[r("RadioGroup",{model:{value:t.formAttribute.inputType,callback:function(e){t.$set(t.formAttribute,"inputType",e)},expression:"formAttribute.inputType"}},[r("Radio",{attrs:{label:0}},[t._v("手工录入")]),r("Radio",{attrs:{label:1}},[t._v("从下列列表选择")])],1)],1),1===t.formAttribute.inputType?r("FormItem",{attrs:{prop:"inputList",label:"属性值可选值列表"}},[r("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:6,placeholder:"（多个属性以回车隔开）"},model:{value:t.formAttribute.inputList,callback:function(e){t.$set(t.formAttribute,"inputList",e)},expression:"formAttribute.inputList"}})],1):t._e(),1===t.formAttribute.inputType?r("FormItem",{attrs:{prop:"handAddStatus",label:"是否支持手动新增"}},[r("RadioGroup",{model:{value:t.formAttribute.handAddStatus,callback:function(e){t.$set(t.formAttribute,"handAddStatus",e)},expression:"formAttribute.handAddStatus"}},[r("Radio",{attrs:{label:0}},[t._v("否")]),r("Radio",{attrs:{label:1}},[t._v("是")])],1)],1):t._e(),r("FormItem",{attrs:{prop:"sort",label:"排序"}},[r("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0},model:{value:t.formAttribute.sort,callback:function(e){t.$set(t.formAttribute,"sort",e)},expression:"formAttribute.sort"}})],1),r("FormItem",[r("Button",{staticClass:"mg-tp",attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formAttribute")}}},[t._v(t._s(t.formAttribute.attributeId?"修改":"添加"))])],1)],1)],1)},i=[],u=(r("7f7f"),r("1c4c"),r("ac6a"),r("5df3"),r("4f7f"),r("28a5"),r("a481"),r("7fbc")),o=r("7e1e"),n=function(t,e,r){if(e){var a=e.indexOf(",");if(-1===a){try{var i=e.replace(/[\n\r]/g,",");console.log(i,e);var u=i.split(",");u.some((function(t){""!==t||r(new Error("请检查多余回车"))}));var o=new Set(u),n=Array.from(o);if(n.length!==u.length)return void r(new Error("属性不能重复"))}catch(s){return void r(new Error("格式错误"))}r()}else r(new Error("不允许有英文逗号"))}else r(new Error("不允许为空"))},s={data:function(){return{id:null,formAttribute:{attributeCategoryId:null,attributeId:null,attributeName:"",attributeType:0,handAddStatus:0,inputList:"",inputType:1,selectType:1,sort:1},shopList:[],ruleInline:{attributeName:[{required:!0,message:"请输入属性名称",trigger:"blur,change"},{type:"string",max:15,message:"不能超过15个字符",trigger:"blur,change"}],sort:[{required:!0,type:"number",message:"请输入排序",trigger:"blur,change"}],attributeCategoryId:[{required:!0,type:"number",message:"请选择商品类型",trigger:"blur,change"}],inputList:[{required:!0,validator:n,trigger:"blur,change"}]}}},methods:{handleSubmit:function(t){var e=this;console.log("nimabi"),this.$refs[t].validate((function(t){if(t){var r=JSON.parse(JSON.stringify(e.formAttribute));r.inputList=r.inputList.replace(/[\n\r]/g,","),e.formAttribute.attributeId?Object(u["c"])(r.attributeId,r).then((function(t){e.$Message.success("修改成功"),e.$router.back()})).catch((function(t){e.$Message.error("修改失败")})):Object(u["a"])(r).then((function(t){e.$Message.success("添加成功"),e.$router.back()})).catch((function(t){e.$Message.error("添加失败")}))}else e.$Message.error("请输入必填项")}))}},computed:{getInputType:function(){return this.formAttribute.inputType}},watch:{getInputType:function(t){console.log(t)}},created:function(){var t=this;this.$route.query.attributeCategoryId?(this.formAttribute.attributeCategoryId=this.$route.query.attributeCategoryId,this.formAttribute.attributeType=this.$route.query.attributeType):this.$router.back(),this.$route.query.attributeId&&(this.formAttribute=this.$route.query),Object(o["d"])({pageNum:1,pageSize:1e3}).then((function(e){console.log(e);var r=[];e.data.data.forEach((function(t){r.push({value:t.attributeCategoryId,label:t.attributeCategoryName})})),t.shopList=r})).catch((function(t){}))}},l=s,c=r("2877"),b=Object(c["a"])(l,a,i,!1,null,null,null);e["default"]=b.exports},"7fbc":function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return u})),r.d(e,"c",(function(){return o}));var a=r("66df"),i=function(t){var e=t.attributeCategoryId,r=t.attributeType,i=t.pageNum,u=t.pageSize,o={attributeCategoryId:e,attributeType:r,pageNum:i,pageSize:u};return a["a"].request({url:"/productAttribute/list",params:o,method:"get"})},u=function(t){return a["a"].request({url:"/productAttribute/create",data:t,method:"post",headers:{"content-type":"application/json"}})},o=function(t,e){return a["a"].request({url:"/productAttribute/update/".concat(t),data:e,method:"post",headers:{"content-type":"application/json"}})}}}]);