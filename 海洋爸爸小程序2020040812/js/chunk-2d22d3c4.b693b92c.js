(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d3c4"],{f741:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("tabBar",{attrs:{show:!0,add:t.handleAdd}}),a("TablePage",{attrs:{columns:t.tableList.columns,data:t.tableList.data1,total:t.tableList.total,limit:t.search.limit,handleSearch:t.handleSearch},on:{"change-limit":t.handleChange},model:{value:t.search.page,callback:function(e){t.$set(t.search,"page",e)},expression:"search.page"}}),a("Modal",{attrs:{title:"删除数据",loading:!0},on:{"on-ok":t.asyncOK},model:{value:t.modalOff,callback:function(e){t.modalOff=e},expression:"modalOff"}},[a("p",[t._v("数据无价，确定要删除数据么")])])],1)},r=[],i=(a("96cf"),a("3b8d")),o=(a("386d"),a("7e1e")),c={data:function(){var t=this;return{parentId:0,id:null,modalOff:!1,tableList:{columns:[{title:"编号",key:"categoryId",align:"center"},{title:"分类名称",key:"categoryName",align:"center"},{title:"级别",key:"categoryLevel",align:"center"},{title:"商品数量",key:"productCount",align:"center"},{title:"创建时间",key:"createTime",align:"center"},{title:"是否显示",key:"packName",align:"center",render:function(e,a){return e("i-switch",{props:{value:a.row.showStatus,size:"large",trueValue:1,falseValue:0},on:{"on-change":function(e){var n={showStatus:e};t.productCategory(a.row.categoryId,n)}},scopedSlots:{open:function(){return e("span","显示")},close:function(){return e("span","关闭")}}})}},{title:"排序",key:"sort",align:"center"},{title:"设置",key:"packName",align:"center",render:function(e,a){return e("i-button",{style:{marginLeft:"15px"},props:{disabled:0!==t.parentId},on:{click:function(){t.$router.push({name:"/category",query:{id:a.row.categoryId}})}}},"查看下级")}},{title:"操作",key:"packName",align:"center",render:function(e,a){return e("div",{style:{display:"flex",justifyContent:"center"}},[e("i-button",{style:{marginLeft:"15px"},on:{click:function(){var e=JSON.stringify(a.row);console.log(a.row),t.$router.push({name:"/categoryAdd",query:{id:a.row.parentId,obj:e}})}}},"编辑"),e("i-button",{style:{marginLeft:"15px"},props:{type:"error"},on:{click:function(){t.id=a.row.categoryId,t.modalOff=!0}}},"删除")])}}],data1:[],total:0},search:{page:1,limit:10}}},methods:{handleChange:function(t){this.search.limit=t,this.handleSearch()},handleSearch:function(t){var e=this;this.loading=!0,"page"!==t&&(this.search.page=1);var a=this.parentId,n=this.search.page,r=this.search.limit;Object(o["h"])({parentId:a,pageNum:n,pageSize:r}).then((function(t){console.log(t),e.tableList.data1=t.data.data,e.tableList.total=t.data.total,e.loading=!1})).catch((function(t){e.loading=!1}))},productCategory:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a,n){var r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n?Object(o["g"])(e).then((function(t){r.callback(),r.handleSearch(),r.$Message.warning("删除成功")})).catch((function(t){})):Object(o["i"])(e,a).then((function(t){r.$Message.success("修改成功")})).catch((function(t){}));case 1:case"end":return t.stop()}}),t)})));function e(e,a,n){return t.apply(this,arguments)}return e}(),callback:function(){this.modalOff=!1},asyncOK:function(){var t={categoryStatus:0,showStatus:0};this.productCategory(this.id,t,!0)},handleAdd:function(){this.$router.push({name:"/categoryAdd",query:{id:this.parentId}})}},watch:{$route:function(t){this.$route.query.id?this.parentId=this.$route.query.id:this.parentId=0,this.handleSearch()}},mounted:function(){this.$route.query.id?this.parentId=this.$route.query.id:this.parentId=0,this.handleSearch()}},s=c,l=a("2877"),u=Object(l["a"])(s,n,r,!1,null,"b65885ea",null);e["default"]=u.exports}}]);