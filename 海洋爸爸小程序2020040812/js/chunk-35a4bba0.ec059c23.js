(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35a4bba0"],{"709b":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s}));n("7f7f");var r=n("66df"),a=function(e){var t=e.name,n=e.showStatus,a=e.pageNum,o=e.pageSize,s={name:t,showStatus:n,pageNum:a,pageSize:o};return r["a"].request({url:"/carousel/list",params:s,method:"get"})},o=function(e){return r["a"].request({url:"/carousel/create",data:e,method:"post",headers:{"content-type":"application/json"}})},s=function(e,t){return r["a"].request({url:"/carousel/update/".concat(e),data:t,method:"post",headers:{"content-type":"application/json"}})}},"85db":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"add-box"},[n("Form",{ref:"formBanner",attrs:{model:e.formBanner,rules:e.ruleInline,"label-colon":"","label-width":100}},[n("FormItem",{attrs:{prop:"name",label:"轮播名称"}},[n("Input",{staticStyle:{width:"300px"},model:{value:e.formBanner.name,callback:function(t){e.$set(e.formBanner,"name",t)},expression:"formBanner.name"}})],1),n("FormItem",{attrs:{prop:"sort",label:"展示顺序"}},[n("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0},model:{value:e.formBanner.sort,callback:function(t){e.$set(e.formBanner,"sort",t)},expression:"formBanner.sort"}})],1),n("FormItem",{attrs:{prop:"pic",label:"轮播图"}},[n("UploadImg",{attrs:{off:e.off},model:{value:e.formBanner.pic,callback:function(t){e.$set(e.formBanner,"pic",t)},expression:"formBanner.pic"}})],1),n("FormItem",{attrs:{prop:"showStatus",label:"展示状态"}},[n("i-switch",{attrs:{"true-value":1,"false-value":0},model:{value:e.formBanner.showStatus,callback:function(t){e.$set(e.formBanner,"showStatus",t)},expression:"formBanner.showStatus"}})],1),n("FormItem",{attrs:{prop:"productSn",label:"展示的商品"}},[n("Select",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.formBanner.productSn,callback:function(t){e.$set(e.formBanner,"productSn",t)},expression:"formBanner.productSn"}},e._l(e.shopList,(function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1),n("Button",{staticClass:"mg-lf",on:{click:e.handleAddShop}},[e._v("选择商品")])],1),n("FormItem",[n("Button",{staticClass:"mg-tp",attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formBanner")}}},[e._v(e._s(e.formBanner.id?"修改"+e.formBanner.name:"添加"))])],1)],1),n("SelectCommodity",{attrs:{productSn:e.formBanner.productSn},on:{"on-change":e.handleChange},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},a=[],o=(n("7f7f"),n("90de")),s=n("709b"),u=n("e692"),c={data:function(){return{show:!1,formBanner:{creater:localStorage.userId,name:"",id:null,sort:1,pic:"",productSn:0,showStatus:1},off:2,shopList:[],ruleInline:{name:[{required:!0,message:"请输入商品名称",trigger:"blur,change"},{type:"string",max:15,message:"不能超过15个字符",trigger:"blur,change"}],sort:[{required:!0,type:"number",message:"请输入展示顺序",trigger:"blur,change"}],pic:[{required:!0,message:"请上传轮播图",trigger:"blur,change"}],productSn:[{required:!0,type:"number",message:"请选择商品",trigger:"blur,change"}]}}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e?t.formBanner.id?Object(s["c"])(t.formBanner.id,t.formBanner).then((function(e){t.$Message.success("修改成功"),t.off=1,t.$router.back()})).catch((function(e){})):Object(s["a"])(t.formBanner).then((function(e){t.$Message.success("添加成功"),t.off=1,t.$nextTick((function(){t.$router.push({name:"/banner"})}))})).catch((function(e){})):t.$Message.error("Fail!")}))},handleAddShop:function(){this.show=!0},handleChange:function(e){this.shopList=[e],this.formBanner.productSn=e.value,console.log(this.shopList)},getShopList:function(e){var t=this;Object(u["e"])(e).then((function(e){t.shopList=[{value:e.data.data.productSn,label:e.data.data.productName}]})).catch((function(e){}))}},mounted:function(){if(this.$route.query.obj){var e=JSON.parse(this.$route.query.obj);this.formBanner=Object(o["h"])(e,this.formBanner),this.getShopList(this.formBanner.productSn)}}},i=c,l=n("2877"),m=Object(l["a"])(i,r,a,!1,null,"2acd4da4",null);t["default"]=m.exports}}]);