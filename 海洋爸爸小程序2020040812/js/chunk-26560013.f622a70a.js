(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26560013"],{"898f":function(t,e,a){},"8a0b":function(t,e,a){"use strict";var n=a("898f"),l=a.n(n);l.a},c481:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Search",{attrs:{handleSearch:t.handleSearch,handleClear:t.handleClear,loading:t.loading}},[a("div",{staticClass:"flex"},[a("div",[a("span",[t._v("商品名称：")]),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入商品名称"},on:{"on-enter":t.handleSearch},model:{value:t.search.productName,callback:function(e){t.$set(t.search,"productName",e)},expression:"search.productName"}})],1),a("div",{staticClass:"mg-30"},[a("span",[t._v("商品货号：")]),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入商品货号"},on:{"on-enter":t.handleSearch},model:{value:t.search.productSn,callback:function(e){t.$set(t.search,"productSn",e)},expression:"search.productSn"}})],1),a("div",{staticClass:"mg-30 flex just"},[a("span",[t._v("商品分类：")]),a("Cascader",{attrs:{filterable:"",data:t.attrList},model:{value:t.search.productCategoryId,callback:function(e){t.$set(t.search,"productCategoryId",e)},expression:"search.productCategoryId"}})],1),a("div",{staticClass:"mg-30"},[a("span",[t._v("上架状态：")]),a("Select",{staticStyle:{width:"220px"},attrs:{clearable:"",placeholder:"请选择上架状态（默认全部）"},model:{value:t.search.publishStatus,callback:function(e){t.$set(t.search,"publishStatus",e)},expression:"search.publishStatus"}},t._l(t.statusList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)])]),a("tabBar",{attrs:{show:!0,add:t.handleAdd}}),a("TablePage",{attrs:{columns:t.tableList.columns,data:t.tableList.data1,total:t.tableList.total,limit:t.search.limit,handleSearch:t.handleSearch,getId:t.getSelect},on:{"change-limit":t.handleChange},model:{value:t.search.page,callback:function(e){t.$set(t.search,"page",e)},expression:"search.page"}}),a("div",[a("Select",{staticStyle:{width:"220px"},attrs:{clearable:"",placeholder:"请选择批量操作"},model:{value:t.delStatus,callback:function(e){t.delStatus=e},expression:"delStatus"}},t._l(t.delList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.handleBatch}},[t._v("批量操作")])],1),a("Modal",{attrs:{title:"删除数据",loading:!0},on:{"on-ok":t.asyncOK},model:{value:t.modalOff,callback:function(e){t.modalOff=e},expression:"modalOff"}},[a("p",[t._v("数据无价，确定要删除数据么")])])],1)},l=[],i=(a("386d"),a("ac6a"),a("28a5"),a("90de")),s=a("e692"),c=a("7e1e"),r={data:function(){var t=this;return{modalOff:!1,search:{productCategoryId:void 0,productName:"",publishStatus:void 0,productSn:"",page:1,limit:10},idList:[],delid:void 0,statusList:[{value:0,label:"下架"},{value:1,label:"上架"}],delStatus:null,delList:[{value:1,label:"删除"},{value:2,label:"下架"},{value:3,label:"上架"}],attrList:[],loading:!1,tableList:{columns:[{title:"编号",key:"productId",align:"center",type:"selection"},{title:"商品图片",key:"albumPics",align:"center",render:function(t,e){return t("img",{attrs:{src:e.row.albumPics.split(",")[0]},style:{width:"100px",height:"100px",padding:"10px 0"}})}},{title:"商品名称",key:"productName",align:"center"},{title:"价格/货号",key:"selectType",align:"center",render:function(t,e){return t("div",{},[t("p",{},"价格：".concat(e.row.price)),t("p",{style:{marginTop:"10px"}},"货号：".concat(e.row.productSn))])}},{title:"标签",key:"publishStatus",align:"center",render:function(e,a){return e("i-switch",{props:{value:a.row.publishStatus,size:"large",trueValue:1,falseValue:0},on:{"on-change":function(e){var n="down";1===e&&(n="up"),t.handleStatus([a.row.productId],n)}},scopedSlots:{open:function(){return e("span","上架")},close:function(){return e("span","下架")}}})}},{title:"SKU库存",key:"inputList",align:"center",tooltip:!0},{title:"销量",key:"sale",align:"center"},{title:"操作",key:"packName",align:"center",render:function(e,a){return e("div",{style:{display:"flex",justifyContent:"center"}},[e("i-button",{style:{marginLeft:"15px"},on:{click:function(){var e=JSON.parse(JSON.stringify(a.row)),n=Object(i["a"])(e.productCategoryId,t.attrList);console.log(n),e.productCategoryId=[t.attrList[n.parentIndex].value,e.productCategoryId+""],t.$router.push({name:"/shopAdd",query:{obj:JSON.stringify(e),id:a.row.productId}})}}},"编辑"),e("i-button",{style:{marginLeft:"15px"},props:{type:"error"},on:{click:function(){t.delid=a.row.productId,t.modalOff=!0}}},"删除")])}}],data1:[],total:0}}},methods:{handleAdd:function(){this.$router.push({name:"/shopAdd"})},handleBatch:function(){this.delStatus&&this.idList.length?(1===this.delStatus?this.handleDel(this.idList):2===this.delStatus?this.handleStatus(this.idList):3===this.delStatus&&this.handleStatus(this.idList,"up"),this.idList=[]):this.$Message.warning("请选择批量操作状态")},getSelect:function(t){console.log(t);var e=[];t.forEach((function(t){e.push(t.productId)})),this.idList=e},handleClear:function(){this.loading=!1,this.search={productCategoryId:void 0,productName:"",publishStatus:void 0,page:1,limit:10},this.handleSearch()},handleStatus:function(t,e){var a=this;if(Array.isArray(t)){var n=0;"up"===e&&(n=1);var l=t;Object(s["b"])({productIds:l,publishStatus:n}).then((function(t){a.$Message.success("修改成功"),a.handleSearch()})).catch((function(t){}))}},handleDel:function(t){var e=this;Object(s["a"])(t).then((function(t){e.$Message.success("删除成功"),e.handleSearch()})).catch((function(t){}))},handleSearch:function(t){var e=this;this.loading=!0,"page"!==t&&(this.search.page=1);var a=this.search,n=a.productCategoryId,l=a.productName,i=a.publishStatus,c=a.productSn,r=this.search.page,o=this.search.limit;try{n=n[1]}catch(d){n=null}Object(s["f"])({productCategoryId:n,productName:l,publishStatus:i,productSn:c,pageNum:r,pageSize:o}).then((function(t){console.log(t),e.tableList.data1=t.data.data,e.tableList.total=t.data.total,e.loading=!1})).catch((function(t){e.loading=!1}))},handleChange:function(t){this.search.limit=t,this.handleSearch()},asyncOK:function(){this.handleDel([this.delid]),this.modalOff=!1}},watch:{delid:function(t){console.log("你特么什么时候变的",t)}},created:function(){var t=this;this.handleSearch(),Object(c["h"])({parentId:0,pageNum:1,pageSize:1e3}).then((function(e){console.log(e);var a=[];e.data.data.forEach((function(e,n){a.push({value:e.categoryId+"",label:e.categoryName,children:[]}),Object(c["h"])({parentId:e.categoryId,pageNum:1,pageSize:1e3}).then((function(e){e.data.data.forEach((function(t){a[n].children.push({value:t.categoryId+"",label:t.categoryName})})),t.attrList=a})).catch((function(t){}))}))})).catch((function(t){}))}},o=r,d=(a("8a0b"),a("2877")),u=Object(d["a"])(o,n,l,!1,null,"04bb6e20",null);e["default"]=u.exports}}]);