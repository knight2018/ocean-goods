(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d237c57"],{fd14:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add-box"},[r("Form",{ref:"formCategory",attrs:{model:e.formCategory,rules:e.ruleInline,"label-colon":"","label-width":120}},[r("FormItem",{attrs:{prop:"categoryName",label:"分类名称"}},[r("Input",{staticStyle:{width:"300px"},model:{value:e.formCategory.categoryName,callback:function(t){e.$set(e.formCategory,"categoryName",t)},expression:"formCategory.categoryName"}})],1),r("FormItem",{attrs:{prop:"parentId",label:"上级分类"}},[r("Select",{staticStyle:{width:"200px"},attrs:{disabled:e.disbaled},model:{value:e.formCategory.parentId,callback:function(t){e.$set(e.formCategory,"parentId",t)},expression:"formCategory.parentId"}},e._l(e.shopList,(function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),r("FormItem",{attrs:{prop:"sort",label:"排序"}},[r("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0},model:{value:e.formCategory.sort,callback:function(t){e.$set(e.formCategory,"sort",t)},expression:"formCategory.sort"}})],1),r("FormItem",{attrs:{prop:"showStatus",label:"是否显示"}},[r("i-switch",{attrs:{"true-value":1,"false-value":0},model:{value:e.formCategory.showStatus,callback:function(t){e.$set(e.formCategory,"showStatus",t)},expression:"formCategory.showStatus"}})],1),r("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.formCategory.parentId,expression:"formCategory.parentId"}],attrs:{prop:"classify",label:"实体/虚拟"}},[r("i-switch",{attrs:{"true-value":1,"false-value":2,size:"large"},model:{value:e.formCategory.classify,callback:function(t){e.$set(e.formCategory,"classify",t)},expression:"formCategory.classify"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v("实体")]),r("span",{attrs:{slot:"close"},slot:"close"},[e._v("虚拟")])])],1),0==e.formCategory.parentId?r("FormItem",{attrs:{prop:"icon",label:"一级分类图片"}},[r("UploadImg",{attrs:{off:e.off},model:{value:e.formCategory.icon,callback:function(t){e.$set(e.formCategory,"icon",t)},expression:"formCategory.icon"}})],1):e._e(),r("FormItem",[r("Button",{staticClass:"mg-tp",attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formCategory")}}},[e._v(e._s(e.categoryId?"修改":"添加"))])],1)],1)],1)},o=[],s=(r("ac6a"),r("7f7f"),r("90de")),l=r("7e1e"),n=function(e,t,r){if(t){var a=/^#[\da-f]{3}([\da-f]{3})?$/i;a.test(t)?r():r(new Error("不符合十六进制颜色规则"))}else r(new Error("不允许为空"))},i={data:function(){return{categoryId:null,disbaled:!1,off:2,formCategory:{categoryLevel:1,categoryName:"",classify:2,parentId:0,showStatus:0,backgroundColor:"",fontColor:"",icon:"",sort:1},shopList:[{value:0,label:"无上级分类"}],ruleInline:{categoryName:[{required:!0,message:"请输入分类名称",trigger:"blur,change"},{type:"string",max:15,message:"不能超过15个字符",trigger:"blur,change"}],sort:[{required:!0,type:"number",message:"请输入排序",trigger:"blur,change"}],parentId:[{required:!0,type:"number",message:"请选择分类",trigger:"blur,change"}],icon:[{required:!0,message:"请上传一级分类图",trigger:"blur,change"}],backgroundColor:[{required:!0,validator:n,trigger:"blur,change"}],fontColor:[{required:!0,validator:n,trigger:"blur,change"}]}}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var r=t.formCategory;0===t.formCategory.parentId?(t.formCategory.categoryLevel=1,r.classify=0):t.formCategory.categoryLevel=2,t.categoryId?Object(l["i"])(t.categoryId,r).then((function(e){t.$Message.success("修改成功"),t.off=1,t.$router.back()})).catch((function(e){})):Object(l["f"])(t.formCategory).then((function(e){console.log(e),t.$Message.success("添加成功"),t.off=1,t.$router.back()})).catch((function(e){}))}else t.$Message.error("请添加必传参数!")}))}},mounted:function(){var e=this;if(this.$route.query.obj){var t=JSON.parse(this.$route.query.obj);this.formCategory=Object(s["h"])(t,this.formCategory),this.categoryId=t.categoryId}this.formCategory.parentId=this.$route.query.id,0===this.$route.query.id&&this.categoryId&&(this.disbaled=!0,this.formCategory.classify=2);var r=0,a=1,o=100;Object(l["h"])({parentId:r,pageNum:a,pageSize:o}).then((function(t){var r=[];0===e.$route.query.id&&r.push({value:0,label:"无上级分类"}),t.data.data.forEach((function(e){r.push({value:e.categoryId,label:e.categoryName})})),e.shopList=r,e.formCategory.parentId=e.$route.query.id})).catch((function(e){}))}},c=i,u=r("2877"),f=Object(u["a"])(c,a,o,!1,null,"e3e42cf0",null);t["default"]=f.exports}}]);