(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-088982c2"],{5885:function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"add-box"},[e("Form",{ref:"formsection",attrs:{model:t.formsection,rules:t.ruleInline,"label-colon":"","label-width":100}},[e("FormItem",{attrs:{prop:"sort",label:"展示顺序"}},[e("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0},model:{value:t.formsection.sort,callback:function(o){t.$set(t.formsection,"sort",o)},expression:"formsection.sort"}})],1),e("FormItem",{attrs:{prop:"pic",label:"栏目图"}},[e("UploadImg",{attrs:{off:t.off},model:{value:t.formsection.pic,callback:function(o){t.$set(t.formsection,"pic",o)},expression:"formsection.pic"}})],1),e("FormItem",{attrs:{prop:"showStatus",label:"展示状态"}},[e("i-switch",{attrs:{"true-value":1,"false-value":2},model:{value:t.formsection.showStatus,callback:function(o){t.$set(t.formsection,"showStatus",o)},expression:"formsection.showStatus"}})],1),e("FormItem",{attrs:{prop:"productSn",label:"展示的商品"}},[e("Select",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.formsection.productSn,callback:function(o){t.$set(t.formsection,"productSn",o)},expression:"formsection.productSn"}},t._l(t.shopList,(function(o){return e("Option",{key:o.value,attrs:{value:o.value}},[t._v(t._s(o.label))])})),1),e("Button",{staticClass:"mg-lf",on:{click:t.handleAddShop}},[t._v("选择商品")])],1),e("FormItem",[e("Button",{staticClass:"mg-tp",attrs:{type:"primary"},on:{click:function(o){return t.handleSubmit("formsection")}}},[t._v(t._s(t.formsection.id?"修改":"添加"))])],1)],1),e("SelectCommodity",{attrs:{productSn:t.formsection.productSn},on:{"on-change":t.handleChange},model:{value:t.show,callback:function(o){t.show=o},expression:"show"}})],1)},r=[],s=(e("7f7f"),e("90de")),c=e("b789"),a=e("e692"),i=function(t,o,e){o?e():e(new Error("商品不允许为空"))},u={data:function(){return{show:!1,formsection:{id:null,columnCategoryId:1,creater:localStorage.userId,sort:1,pic:"",showStatus:1,productSn:0},off:2,shopList:[],ruleInline:{sort:[{required:!0,type:"number",message:"请输入展示顺序",trigger:"blur,change"}],pic:[{required:!0,message:"请上传栏目图",trigger:"blur,change"}],productSn:[{required:!0,validator:i,trigger:"blur,change"}]}}},methods:{handleSubmit:function(t){var o=this;this.$refs[t].validate((function(t){t?o.formsection.id?Object(c["e"])(o.formsection.id,o.formsection).then((function(t){o.$Message.success("添加成功"),o.off=1,o.$router.back()})).catch((function(t){})):Object(c["c"])(o.formsection).then((function(t){o.$Message.success("修改成功"),o.off=1,o.$router.back()})).catch((function(t){})):o.$Message.error("Fail!")}))},handleAddShop:function(){this.show=!0},handleChange:function(t){this.shopList=[t],this.formsection.productSn=t.value,console.log(this.shopList)},getShopList:function(t){var o=this;console.log(t),Object(a["e"])(t).then((function(t){o.shopList=[{value:t.data.data.productSn,label:t.data.data.productName}]})).catch((function(t){}))}},mounted:function(){console.log(this.$route.query);var t=this.$route.query;if(t.id&&(this.formsection.columnCategoryId=t.id),t.obj){var o=JSON.parse(t.obj);this.formsection=Object(s["h"])(o,this.formsection),this.getShopList(this.formsection.productSn)}}},l=u,d=e("2877"),f=Object(d["a"])(l,n,r,!1,null,"a060a460",null);o["default"]=f.exports},b789:function(t,o,e){"use strict";e.d(o,"a",(function(){return r})),e.d(o,"b",(function(){return s})),e.d(o,"d",(function(){return c})),e.d(o,"c",(function(){return a})),e.d(o,"e",(function(){return i}));var n=e("66df"),r=function(){var t={};return n["a"].request({url:"/column/listAll",params:t,method:"get"})},s=function(t,o){return n["a"].request({url:"/column/update/".concat(t),data:o,method:"post",headers:{"content-type":"application/json"}})},c=function(t){var o={};return n["a"].request({url:"/column/product/list/".concat(t),params:o,method:"get"})},a=function(t){return n["a"].request({url:"/column/product/create",data:t,method:"post",headers:{"content-type":"application/json"}})},i=function(t,o){return n["a"].request({url:"/column/product/update/".concat(t),data:o,method:"post",headers:{"content-type":"application/json"}})}}}]);